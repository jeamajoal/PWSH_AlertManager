# Notification Tool global configuration (example)
#
# Copy this file to:  Config/config.conf
#
# Notes:
# - Comma-separated lists for recipients (example: DefaultRecipients=a@b.com,b@c.com).
# - Prefer PasswordEnvVar over Password (especially for Task Scheduler).
# - If Email.Provider is blank, you must supply an EmailSender scriptblock when calling Start-AlertNotificationCycle.

# Escalation (optional)
#
# These settings provide DEFAULTS used when auto-creating a per-script Escalation.json.
# Per-script escalation is configured in: Registrations\<ScriptId>\Escalation.json

# EscalationSubjectPrefixFormat:
# - Prefix used for escalation email subjects.
# - Supports {ScriptId}
EscalationSubjectPrefixFormat=[{ScriptId}][ESCALATION]

# DefaultEscalationEmailProfile:
# - Optional email profile name to use for escalation emails.
# - If blank, the script's normal EmailProfile (Registration.json) will be used.
DefaultEscalationEmailProfile=

# DefaultEscalationTierEmails.<N>:
# - Tiered escalation recipients keyed by alert SentCount threshold N.
# - Thresholds are driven ONLY by these keys.
# - Comma-separated list.
# Example:
#   DefaultEscalationTierEmails.3=oncall@example.com
#   DefaultEscalationTierEmails.5=teamlead@example.com
#   DefaultEscalationTierEmails.7=director@example.com
DefaultEscalationTierEmails.=

# Default recipients applied to new script registrations (can be overridden per script in Registration.json)
DefaultRecipients=alerts@example.com

# Subject prefix format (supports {ScriptId})
SubjectPrefixFormat=[{ScriptId}]

# Which profile to use by default (see profile sections below)
DefaultEmailProfile=default

[Email]
# Built-in email provider. Supported: mailkit
Provider=mailkit

# From address/name used for outgoing emails
FromAddress=alerts@example.com
FromName=Automation Alerts

[Smtp]
Host=smtp.example.com
Port=587
UseStartTls=true
UseSsl=false
Username=alerts@example.com

# AuthMode:
# - trusted: do not authenticate (relay/trusted connection)
# - none: same as trusted
# - basic: authenticate with Username + Password/PasswordEnvVar
# - defaultCredentials: authenticate with the current user (Windows integrated auth)
# - credentialXml: authenticate using a PSCredential loaded from CredentialXmlPath
AuthMode=trusted

# Avoid storing secrets in this file when possible.
Password=
PasswordEnvVar=NOTIFICATION_TOOL_SMTP_PASSWORD

# Optional: path to a PSCredential exported with Export-Clixml (must be readable by the account running the scheduled task)
# Create it with:
#   Get-Credential | Export-Clixml -Path C:\Path\To\smtp-credential.xml
# Note: Import-Clixml uses the Windows DPAPI scope of the user who created it.
# CredentialXmlPath=C:\Path\To\smtp-credential.xml
CredentialXmlPath=

TimeoutSeconds=60

[MailKit]
# Paths to the MailKit DLLs on disk
# Example Windows locations:
# MimeKitDllPath=C:\Path\To\MimeKit.dll
# MailKitDllPath=C:\Path\To\MailKit.dll
MimeKitDllPath=
MailKitDllPath=

# Additional MailKit scenarios (optional):
#
# [Email:secondary]
# Provider=mailkit
# FromAddress=alerts2@example.com
# FromName=Automation Alerts (Secondary)
#
# [Smtp:secondary]
# Host=smtp2.example.com
# Port=587
# UseStartTls=true
# UseSsl=false
# AuthMode=defaultCredentials
# Username=
# Password=
# PasswordEnvVar=
# CredentialXmlPath=
# TimeoutSeconds=60
#
# [MailKit:secondary]
# MimeKitDllPath=C:\Path\To\MimeKit.dll
# MailKitDllPath=C:\Path\To\MailKit.dll
